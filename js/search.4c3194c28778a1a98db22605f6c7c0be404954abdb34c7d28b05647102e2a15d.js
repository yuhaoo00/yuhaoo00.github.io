(()=>{var m="/",l=20;(function(){"use strict";let a=new FlexSearch.Document({document:{id:"id",index:["title","tags","content","date"],store:["title","summary","date","permalink"]},tokenize:"forward"});function h(e){let t=document.querySelector("template").content,n=document.createDocumentFragment(),c=document.querySelector(".search-results");c.textContent="";for(let r in e){let o=e[r],s=t.cloneNode(!0),u=s.querySelector("a"),y=s.querySelector("time"),q=s.querySelector(".content");u.innerHTML=o.title,u.href=o.permalink,y.innerText=o.date,q.innerHTML=o.summary,n.appendChild(s)}c.appendChild(n)}function i(){let e=document.querySelector(".search-text").value.trim(),t=a.search({query:e,enrich:!0,limit:l}),n={};t.forEach(function(c){c.result.forEach(function(r){n[r.id]=r.doc})}),h(n)}function f(){let e=document.querySelector(".search-form");e.addEventListener("submit",function(t){t.preventDefault(),i()}),e.addEventListener("input",function(){i()}),document.querySelector(".search-loading").classList.add("hidden"),document.querySelector(".search-input").classList.remove("hidden"),document.querySelector(".search-text").focus()}function p(){let e=m+"searchindex.json";document.querySelector(".search-loading").classList.remove("hidden"),fetch(e).then(function(t){return t.json()}).then(function(t){t.forEach(function(n){a.add(n)})})}p(),f()})();})();
